<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Nousad AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@300;500;700&family=Space+Mono&display=swap"
      rel="stylesheet"
    />
    <script type="importmap">
      {
        "imports": {
          "@google/generative-ai": "https://esm.run/@google/generative-ai"
        }
      }
    </script>
    <style>
      :root {
        --primary: #00f3ff;
        --secondary: #0066ff;
        --bg: #050505;
        --glass: rgba(0, 243, 255, 0.05);
      }
      body {
        background-color: var(--bg);
        color: var(--primary);
        font-family: "Rajdhani", sans-serif;
        height: 100vh;
        overflow: hidden;
        background-image:
          linear-gradient(rgba(0, 20, 40, 0.9) 1px, transparent 1px),
          linear-gradient(90deg, rgba(0, 20, 40, 0.9) 1px, transparent 1px);
        background-size: 40px 40px;
        cursor: crosshair;
      }
      .font-mono {
        font-family: "Space Mono", monospace;
      }
      .hud-border {
        border: 1px solid var(--glass);
        box-shadow: 0 0 15px rgba(0, 243, 255, 0.1);
        background: rgba(0, 10, 20, 0.6);
        backdrop-filter: blur(5px);
      }
      .core-container {
        position: relative;
        width: 240px;
        height: 240px;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .ring {
        position: absolute;
        border-radius: 50%;
        border: 2px solid transparent;
        box-shadow: 0 0 20px var(--primary);
      }
      .r1 {
        width: 100%;
        height: 100%;
        border-top-color: var(--primary);
        border-bottom-color: var(--primary);
        animation: spin 10s linear infinite;
      }
      .r2 {
        width: 80%;
        height: 80%;
        border-left-color: var(--secondary);
        border-right-color: var(--secondary);
        animation: spin-rev 6s linear infinite;
      }
      .r3 {
        width: 60%;
        height: 60%;
        border: 1px dashed rgba(255, 255, 255, 0.3);
        animation: pulse 2s ease-in-out infinite;
      }
      .core {
        width: 60px;
        height: 60px;
        background: radial-gradient(circle, #fff, var(--primary));
        border-radius: 50%;
        box-shadow:
          0 0 50px var(--primary),
          0 0 100px var(--secondary);
        z-index: 10;
        transition: all 0.3s;
      }
      .status-listening .core {
        transform: scale(0.9);
        box-shadow: 0 0 30px var(--primary);
      }
      .status-speaking .core {
        animation: flicker 0.1s infinite alternate;
        transform: scale(1.2);
      }
      .viz-bar {
        width: 4px;
        background: var(--primary);
        margin: 0 2px;
        height: 5px;
        transition: height 0.05s;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
      @keyframes spin-rev {
        to {
          transform: rotate(-360deg);
        }
      }
      @keyframes flicker {
        0% {
          opacity: 0.8;
        }
        100% {
          opacity: 1;
        }
      }
      @keyframes scan {
        0% {
          top: -10%;
        }
        100% {
          top: 110%;
        }
      }
      .scan-line {
        position: fixed;
        left: 0;
        width: 100%;
        height: 5px;
        background: rgba(0, 243, 255, 0.1);
        animation: scan 4s linear infinite;
        pointer-events: none;
        z-index: 50;
      }
      #captions {
        text-shadow: 0 0 10px var(--primary);
      }
    </style>
  </head>
  <body class="flex flex-col justify-between p-6">
    <div class="scan-line"></div>
    <header class="flex justify-between items-center z-10">
      <div>
        <h1 class="text-4xl font-bold tracking-widest uppercase">
          NOUSAD<span class="text-white">AI</span>
        </h1>
        <div class="text-xs text-blue-400 tracking-[0.5em] mt-1">
          SYSTEM ONLINE
        </div>
      </div>
      <div class="hud-border px-4 py-2 rounded flex items-center gap-3">
        <div
          id="status-light"
          class="w-2 h-2 rounded-full bg-red-500 shadow-[0_0_10px_red]"
        ></div>
        <span id="status-text" class="font-mono text-xs uppercase"
          >INITIALIZING</span
        >
      </div>
    </header>
    <main
      class="flex-1 flex flex-col items-center justify-center relative z-10"
    >
      <div id="core-wrapper" class="core-container mb-12">
        <div class="ring r1"></div>
        <div class="ring r2"></div>
        <div class="ring r3"></div>
        <div class="core"></div>
      </div>
      <div class="w-full max-w-3xl text-center">
        <p
          id="captions"
          class="text-2xl md:text-3xl font-light min-h-[60px] uppercase tracking-wide opacity-90"
        >
          CLICK ANYWHERE TO ENGAGE SYSTEM
        </p>
      </div>
    </main>
    <footer class="flex justify-between items-end z-10 w-full">
      <div id="visualizer" class="flex items-end h-16"></div>
      <div
        class="hud-border px-4 py-2 text-[10px] uppercase text-gray-400 tracking-wider"
      >
        Developed by Mohamed Nousad
      </div>
    </footer>
    <script type="module">
      import { GoogleGenerativeAI } from "@google/generative-ai";
      const API_KEY = "AIzaSyCA55VTeGj99g3Gc59c0v-Fd3KASTrVqq0";
      const sysPrompt =
        "You are Nousad AI, a futuristic intelligent assistant. Keep responses concise, witty, and precise. No formatting.";
      let state = {
        genAI: new GoogleGenerativeAI(API_KEY),
        model: null,
        chat: null,
        rec: null,
        speaking: false,
        voices: [],
      };
      const ui = {
        core: document.querySelector(".core"),
        captions: document.getElementById("captions"),
        status: document.getElementById("status-text"),
        light: document.getElementById("status-light"),
        viz: document.getElementById("visualizer"),
      };
      async function init() {
        state.model = state.genAI.getGenerativeModel({ model: "gemini-3-flash-preview" });
        state.chat = state.model.startChat({
          history: [
            { role: "user", parts: [{ text: sysPrompt }] },
            { role: "model", parts: [{ text: "Online." }] },
          ],
        });
        setupVoice();
        setupRec();
        createViz();
      }
      function setupVoice() {
        window.speechSynthesis.onvoiceschanged = () => {
          state.voices = window.speechSynthesis.getVoices();
        };
      }
      function getBestVoice() {
        return (
          state.voices.find((v) => v.name.includes("Google US English")) ||
          state.voices.find((v) => v.name.includes("Zira")) ||
          state.voices.find((v) => v.lang === "en-US") ||
          state.voices[0]
        );
      }
      function setupRec() {
        if (!("webkitSpeechRecognition" in window))
          return (ui.captions.innerText = "VOICE MODULE MISSING");
        const Rec = window.webkitSpeechRecognition;
        state.rec = new Rec();
        state.rec.continuous = false;
        state.rec.interimResults = false;
        state.rec.lang = "en-US";
        state.rec.onstart = () => {
          if (state.speaking) return;
          setStatus("LISTENING", "#00f3ff");
          ui.core.parentElement.classList.add("status-listening");
        };
        state.rec.onend = () => {
          ui.core.parentElement.classList.remove("status-listening");
          if (!state.speaking) state.rec.start();
        };
        state.rec.onresult = async (e) => {
          const transcript = e.results[0][0].transcript;
          ui.captions.innerText = transcript;
          setStatus("PROCESSING", "#a855f7");
          state.rec.stop();
          try {
            const result = await state.chat.sendMessage(transcript);
            speak(result.response.text());
          } catch (err) {
            setStatus("ERROR", "#ef4444");
            setTimeout(() => {
              state.rec.start();
            }, 2000);
          }
        };
      }
      function speak(text) {
        state.speaking = true;
        state.rec.stop();
        setStatus("SPEAKING", "#fff");
        ui.core.parentElement.classList.add("status-speaking");
        const u = new SpeechSynthesisUtterance(text);
        u.voice = getBestVoice();
        u.pitch = 1.1;
        u.rate = 1.1;
        u.onend = () => {
          state.speaking = false;
          ui.core.parentElement.classList.remove("status-speaking");
          setStatus("STANDBY", "#00f3ff");
          state.rec.start();
        };
        window.speechSynthesis.speak(u);
        animateViz();
      }
      function setStatus(txt, col) {
        ui.status.innerText = txt;
        ui.light.style.backgroundColor = col;
        ui.light.style.boxShadow = `0 0 15px ${col}`;
      }
      function createViz() {
        for (let i = 0; i < 30; i++) {
          const b = document.createElement("div");
          b.className = "viz-bar";
          ui.viz.appendChild(b);
        }
      }
      function animateViz() {
        if (!state.speaking) return resetViz();
        const bars = document.querySelectorAll(".viz-bar");
        bars.forEach((b) => {
          b.style.height = Math.random() * 60 + 5 + "px";
        });
        requestAnimationFrame(animateViz);
      }
      function resetViz() {
        document
          .querySelectorAll(".viz-bar")
          .forEach((b) => (b.style.height = "5px"));
      }
      document.body.onclick = () => {
        document.body.onclick = null;
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        ctx.resume();
        state.rec.start();
        ui.captions.innerText = "SYSTEM ENGAGED. AWAITING INPUT.";
        setStatus("STANDBY", "#00f3ff");
      };
      window.onload = init;
    </script>
  </body>
</html>
